Firebase setup checklist:
1. Install the Firebase CLI: `npm install -g firebase-tools`
2. Authenticate with the project: `firebase login`
3. Select the active project locally: `firebase use goldfield-8180d`
4. Verify access (optional): `firebase projects:list`
5. Run emulators when developing (optional): `firebase emulators:start --only firestore,auth,functions`

Environment variables required in `.env` (shared by Vite + Functions):
- `VITE_FIREBASE_API_KEY`
- `VITE_FIREBASE_AUTH_DOMAIN`
- `VITE_FIREBASE_PROJECT_ID`
- `VITE_FIREBASE_STORAGE_BUCKET`
- `VITE_FIREBASE_MESSAGING_SENDER_ID`
- `VITE_FIREBASE_APP_ID`
- `VITE_FIREBASE_MEASUREMENT_ID`
- `VITE_FIREBASE_REGION`
- `VITE_USE_FIREBASE_EMULATOR` (optional)
- `LENCO_API_KEY`
- `LENCO_BASE_URL` (optional, defaults to `https://api.lenco.co/access/v2`)
- `CONTACT_RECIPIENT`

Deploy command:
$ firebase deploy --only hosting:goldfield-zambia-property-gateway

Firebase emulator workflow:
- Set `VITE_USE_FIREBASE_EMULATOR=true` in a local `.env` override when you want the app to target emulators.
- Start the emulators in one terminal: `firebase emulators:start --project goldfield-8180d --only auth,firestore,functions`
- Run `npm run dev` in another terminal; the SDK will automatically connect to the emulators when the flag is enabled.
- Export state after a session if you want persistent seed data: `firebase emulators:start --import=./.firebase-data --export-on-exit`

Security & index deployments:
- Rules: `firebase deploy --only firestore:rules,storage:rules`
- Indexes: `firebase deploy --only firestore:indexes`
- Update Storage CORS (allows localhost + prod uploads):
  - Edit `storage-cors.json` if origins change.
  - Apply with `npx firebase-tools storage:cors:set storage-cors.json --project goldfield-8180d` (requires Firebase CLI auth in a WSL2/Unix shell) or `gsutil cors set storage-cors.json gs://goldfield-8180d.firebasestorage.app`.

Functions setup:
- Install dependencies: `npm install --prefix functions`
- Ensure `.env` is populated with the Lenco + notification keys (functions read it through `functions/src/env.ts`)
- Export the env vars (or configure your CI secrets) before deploying: `export $(grep -v '^#' .env | xargs)`
- Deploy callable/cron functions: `firebase deploy --only functions`
